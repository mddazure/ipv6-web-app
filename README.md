# Delivering web applications over IPv6

The unallocated IPv4 address space pool has been exhausted for some time now, meaning there is no new public address space available for allocation from Internet Registries. The internet continues to run on IPv4 through technical measures such as Network Address Translation (NAT) and [Carrier Grade NAT](https://en.wikipedia.org/wiki/Carrier-grade_NAT), and reallocation of address space through [IPv4 address space trading](https://iptrading.com/). 

Despite the depletion of free IPv4 address space, adoption of IPv6 - with its almost infinitely larger address space the definitive solution to the address space depletion problem - has been slow. [Uptake of IPv6 in the European Union](https://op.europa.eu/en/publication-detail/-/publication/4fcbb7eb-b05e-11ef-acb1-01aa75ed71a1) in Q3 of 2024 stood at appr. 36% for clients (end-users) and 23% for (web) servers over all member states - although there significant variations between states. Globally, [Google](https://www.google.com/intl/en/ipv6/statistics.html#tab=ipv6-adoption) reports 45% of clients connecting to its services over IPv6, with France leading at 80%. However, ultimately IPv6 will be the dominant network protocol on the internet, as the IPv4 life-support mechanisms used by network operators, hosting providers and ISPs will eventually reach the limits of their scalability.

IPv6 client access measured by Google:

![image](/images/google-ipv6-client-access.png)

Meanwhile, countries around the world are mandating IPv6 reachability for public web services. Examples are [the United States](https://www.whitehouse.gov/wp-content/uploads/2020/11/M-21-07.pdf), European Union member states among which [the Netherlands](https://www.forumstandaardisatie.nl/ipv6), [Norway](https://lovdata.no/dokument/SF/forskrift/2013-04-05-959#shareModal), [India](https://dot.gov.in/ipv6-transition-across-stakeholders), Japan. Entities needing to comply with these mandates are looking at Azure's networking capabilities for solutions. Lukcily, Azure supports IPv6 for both private, internal, and external, public, networking and capabilities have developed and expanded over time. This article discusses strategies to build and deploy natively IPv6-enabled public, internet-facing applications that are reachable from IPv6(-only) clients.

IPv6 adoption per country measured by Google:

![image](/images/google-ipv6-country-adoption.png)


## Azure Networking IPv6 capabilities 
Azure's private networking capabilities center on Virtual Networks (VNETs) and the components that are deployed within. Azure VNETs are [IPv4/IPv6](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview) dual stack capable: a VNET **must** always have IPv4 address space allocated, and **can** have also IPv6 address space. Virtual machines in a dual stack VNET will have both an IPv4 and an IPv6 address from the VNET range, and can be behind IPv6 capable External- and Internal Load Balancers.  VNETs can be connected through VNET peering, which effectively turns the peered VNETs into a single routing domain. It is now possible to peer only the IPv6 address spaces of VNETs, so that the IPv4 space assigned to VNETs can overlap and communication across the peering is over IPv6. The same is true for connectivity to onpremise over ExpressRoute: the Private Peering can be enabled for IPv6 only, so that VNETs in Azure do not have to have unique IPv4 address space assigned, which may be in short supply in an enterprise.

![image](/images/ipv6-private-netw.png)

Not all internal networking components are IPv6 capable yet. Most notable exceptions are VPN Gateway, Azure Firewall and Virtual WAN; IPv6 compatibility is on the roadmap for these services, but target availability dates have not been communicated.

But now let's focus on Azure's externally facing, public, network services. Azure is ready to let customers publish their web applications over IPv6.

 IPv6 capable externally facing network services include:
- [Azure Front Door](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview#global-delivery-scale-using-microsofts-network)
- [Application Gateway](https://learn.microsoft.com/en-us/azure/application-gateway/ipv6-application-gateway-portal)
- [External Load Balancer](https://learn.microsoft.com/en-us/azure/load-balancer/deploy-ipv4-ipv6-dual-stack-standard-load-balancer?tabs=azurecli)
- [Public IP addresses](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/public-ip-addresses#ip-address-version) and [Public IP address prefixes](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/public-ip-address-prefix)
- [Azure DNS](https://learn.microsoft.com/en-us/azure/dns/dns-faq#do-azure-dns-name-servers-resolve-over-ipv6--)
- [Azure DDOS Protection](https://learn.microsoft.com/en-us/azure/ddos-protection/ddos-protection-sku-comparison#tiers)
- [Traffic Manager](https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-faqs#does-traffic-manager-support-ipv6-endpoints)
- [App Service](https://azure.github.io/AppService/2024/11/08/Announcing-Inbound-IPv6-support.html) (IPv6 support is in public preview)

Below I will discuss patterns to publish applications over IPv6 using (combinations of) these services.

## IPv6 Application Delivery 

**IPv6 Application Delivery** refers to the architectures and services that enable your web application to be accessible via IPv6. The goal is to provide an IPv6 address and connectivity for clients, while often continuing to run your application on IPv4 internally (dual-stack). Azure’s dual-stack capabilities allow an application to be reachable on both IPv4 and IPv6 without completely re-building your network for IPv6. Key benefits of adopting IPv6 in Azure include:

- **Expanded Client Reach:** *IPv4-only websites risk being unreachable to IPv6-only networks.* By enabling IPv6, you expand your reach into growing mobile and IoT markets that use IPv6 by default. Governments and enterprises increasingly mandate IPv6 support for public-facing services.
- **Address Abundance & No NAT:** IPv6 provides a virtually unlimited address pool, mitigating IPv4 exhaustion concerns. This abundance means each service can have its own public IPv6 address, often removing the need for complex NAT schemes. End-to-end addressing can simplify connectivity and troubleshooting.
- **Dual-Stack Compatibility:** Azure supports dual-stack deployments where services listen on both IPv4 and IPv6. This allows a single application instance or endpoint to serve both types of clients seamlessly. Dual-stack ensures you don’t lose any existing IPv4 users while adding IPv6 capability.
- **Performance and Future Services:** Some networks and clients might experience better performance over IPv6 (due to less NAT). Also, being IPv6-ready prepares your architecture for future Azure features and services as IPv6 integration deepens across the platform.

**General Steps to Enable IPv6 Connectivity** (at a high level) for a web application in Azure are:
1. **Plan and Enable IPv6 Addressing in Azure**: Define an IPv6 address space in your Azure Virtual Network. Azure allows adding IPv6 address space (typically a `/56` for the VNet and `/64` for subnets is recommended) to existing VNETs, making them dual-stack. Ensure subnets meant to host IPv6 resources have a `/64` IPv6 subnet (Azure requires /64 subnets). If you have existing infrastructure, you might need to create new subnets or migrate resources, especially since older [Application Gateway v1 instances cannot simply be “upgraded” to dual-stack](https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-faq#does-application-gateway-support-ipv6).
2. **Deploy or Update Frontend Services with IPv6**: Choose a suitable Azure service (Application Gateway, Front Door, etc.) and configure it with a public IPv6 address on the frontend. This usually means selecting *Dual Stack* configuration so the service gets both an IPv4 and IPv6 public IP. For instance, when creating an Application Gateway v2, you would specify [IP address type: DualStack (IPv4 & IPv6)](https://learn.microsoft.com/en-us/azure/application-gateway/ipv6-application-gateway-portal). Azure Front Door [by default](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview) provides dual-stack capabilities with its global endpoints.
5. **Configure Backends and Routing**: Usually your backend servers or services can remain on IPv4. In fact, as of now Azure Application Gateway **does not support IPv6 for backend pool addresses** (your application VMs or App Service will likely be IPv4). This is fine because the frontend translates requests to the IPv4 backend. Ensure that your load balancing rules, listener configurations, and health probes are all set up to route traffic to these backends. Both IPv4 and IPv6 frontend listeners can share the same backend pool.
6. **Update DNS Records**: Publish a DNS **AAAA record** for your application’s host name, pointing to the new IPv6 address. This step is critical so that IPv6-only clients can discover the IPv6 address of your service. If your service also has an IPv4 address (dual stack), you will have both [A (IPv4) and AAAA (IPv6) records](https://learn.microsoft.com/en-us/azure/dns/dns-zones-records#record-types) for the same host name. DNS will thus allow clients of either IP family to connect. (In multi-region scenarios using Traffic Manager or Front Door, DNS configuration might be handled through those services as discussed later.)
7. **Test IPv6 Connectivity**: Once set up, test from an IPv6-enabled network or use online tools to ensure the site is reachable via IPv6. Azure’s services like Application Gateway and Front Door will handle the dual-stack routing, but it’s good to verify that content loads on an IPv6-only connection and that SSL certificates, etc., work over IPv6 as they do for IPv4.

Next, we explore specific Azure services and architectures for IPv6 web delivery in detail.

### Application Gateway - single region

Azure Application Gateway can be deployed in a single region to provide IPv6 access to applications in that region. In a single-region setup, **Application Gateway acts as the entry point** for IPv6 traffic, terminating HTTP/S from IPv6 clients and forwarding to backend servers (which can be IPv4). This scenario is ideal when your web application is served from one Azure region and you want to enable IPv6 connectivity for it.

**Key IPv6 Features of Application Gateway (v2 SKU)**: 
- **Dual-Stack Frontend:** Application Gateway v2 supports both [IPv4 and IPv6 frontends](https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-faq). When configured as dual-stack, the gateway gets two IP addresses – one IPv4 and one IPv6 – and can listen on both. (IPv6-only mode is not supported; IPv4 is always paired).
- **IPv6 Frontend Availability:** IPv6 support in Application Gateway is available in all public Azure regions that support v2 SKU. Application Gateway v1 does *not* support IPv6, because v1 cannot operate in dual-stack mode.
- **No IPv6 on Backends:** The backend pool must use IPv4 addresses or host names. IPv6 addresses for backend servers are currently not supported. This means your web servers can remain on IPv4 internal addresses, simplifying adoption because you only enable IPv6 on the frontend.
- **WAF Support:** The Application Gateway WAF (Web Application Firewall) will inspect IPv6 client traffic just as it does IPv4. Some WAF features like custom rules matching on IP addresses might not support IPv6 addresses yet.

**Single Region Deployment Steps:** To set up an IPv6-capable Application Gateway in one region, consider the following high-level process:

1. **Enable IPv6 on the Virtual Network:** Ensure the region’s VNet where the Application Gateway will reside has an IPv6 address space. Add a *dual-stack address space* to the VNet (e.g., if your VNet was IPv4-only 10.0.0.0/16, add an IPv6 space like 2001:db8:1234::/56). Configure a subnet for the Application Gateway that is dual-stack (contains both an IPv4 subnet prefix and an IPv6 /64 prefix). Azure’s dual-stack networking will assign the gateway resources addresses in both subnets.
2. **Deploy Application Gateway (v2) with DualStack Frontend:** In the Azure Portal or CLI, create a new Application Gateway using the **Standard_v2 or WAF_v2 SKU**. In the “Basics” or networking settings, choose **IP address type: Dual Stack (IPv4 & IPv6)**. This will prompt you to either select existing or create new public IP resources – one IPv4 and one IPv6. Supply or create a new Public IPv6 Address resource for the gateway’s frontend. Azure will allocate an IPv6 address from the regional pool.
3. **Configure Listeners and Rules:** Set up listeners on the Application Gateway for your site. Typically, you’ll have a listener that binds to *Both* the IPv4 and IPv6 frontends on a given port. In Azure Portal, when creating an HTTP(S) listener, you choose which frontend IP to use – you would create one listener for IPv4 address and one for IPv6. Both listeners can use the same domain name (hostname) and the same underlying routing rule to your backend pool.
4. **Populate Backend Pool:** Ensure your backend pool (the target application servers or service) contains the IPv4 addresses or DNS names of your actual web servers. For example, if using Azure VM scale-set or App Service, add those (they remain IPv4). IPv6 addresses are not supported for backends.
5. **Testing and DNS:** After the gateway is deployed and configured, note the IPv6 address of the frontend (you can find it in the Gateway’s overview or in the associated Public IP resource). Update your application’s DNS records: create an **AAAA record** pointing to this IPv6 address (and update the A record to point to the IPv4 if it changed). With DNS in place, test the application by accessing it from an IPv6-enabled client or tool.

**Outcome:** In this single-region scenario, IPv6-only clients will resolve your website’s hostname to an IPv6 address and connect to the Application Gateway over IPv6. The Application Gateway then handles the traffic and forwards it to your application over IPv4 internally. From the user perspective, the service now appears natively on IPv6. Importantly, this **does not require any changes to the web servers**, which can continue using IPv4. Microsoft’s guidance notes that introducing an IPv6 frontend “only impacts the front-end; you do not need to assign any internal IPv6 address space to use this”[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584). This makes it relatively straightforward to add IPv6 support to existing Azure deployments: add IPv6 addresses at the front door (load balancer or gateway), keep everything behind it as is.

**Example:** Suppose you have a web app, http://yada-r1.dedroog.net, running on a [Container Instance](https://learn.microsoft.com/en-us/azure/container-instances/container-instances-overview) that is [VNET injected](https://learn.microsoft.com/en-us/azure/container-instances/container-instances-virtual-network-concepts), private networking only, into a Spoke VNET. The web app is exposed publically via Application Gateway in a hub VNET. To enable IPv6, you add an IPv6 /56 segment to the Hub VNet and a /64 segment to the subnet dedicated to Application Gateway. Then (re)deploy Application Gateway v2 in dual-stack mode. The gateway now has a public IPv6 address similar to  `2603:1020:1001:11::4fa`. You create a DNS AAAA record for `www.yada-r1.dedroog.net` pointing to that IPv6 address. Now a customer on a mobile network that is IPv6-only can successfully load http://yada-r1.dedroog.net because their DNS query returns the IPv6 address, and the Azure Application Gateway listens on that address to serve the request.

![image](images/appgw-single-region.png)

**Limitations & Considerations:** Be aware of a few limitations in this scenario:
- *Application Gateway v1 SKUs are not supported for IPv6.* If you have an older deployment on v1, you’ll need to migrate to v2.
- *IPv6-only Application Gateway is not allowed.* You must have IPv4 alongside IPv6 (the service must be dual-stack). This is usually fine, as dual-stack ensures all clients are covered.
- *No IPv6 backend addresses:* As noted, your backend pool will use IPv4 addresses. IPv6 for internal servers may come in the future, but currently all traffic will be translated to IPv4 when the gateway forwards it.
- *Management and Monitoring:* The Application Gateway will log traffic from IPv6 clients in its access logs (the client IP field will show IPv6 addresses). Ensure your monitoring solutions can handle and display IPv6 addresses. Azure Monitor and Network Watcher support IPv6 in NSG flow logs and metrics similarly to IPv4. You might consider enabling Azure Monitor alerts if the gateway’s IPv6 frontend goes down or seeing metrics split by protocol.
- *Client & Internet Reachability:* Azure’s IPv6 addresses are globally routable. Clients on the IPv6 internet should reach the gateway without issue. Azure’s infrastructure provides basic DDoS protection for IPv6 endpoints just as for IPv4. For enhanced mitigation, consider Azure DDoS Protection Standard which supports IPv6 as well, to defend against volumetric attacks on your IPv6 address.

### Application Gateway - multi-region

For mission-critical web applications, you may deploy in **multiple Azure regions** to achieve higher availability and lower latency for users worldwide. In a multi-region scenario, you need a mechanism to direct IPv6 client traffic to the “nearest” or healthiest region. Azure Application Gateway by itself is a regional service, so to use it in multiple regions, we typically introduce **Azure Traffic Manager** for global DNS load balancing, or use Azure Front Door (covered in the next section) as an alternative. This section will focus on the **Traffic Manager + Application Gateway** approach to multi-region IPv6 delivery.

**Using Traffic Manager for Multi-Region IPv6**: Azure Traffic Manager (TM) is a DNS-based load balancer that can distribute traffic across endpoints in different regions. It works by responding to DNS queries with the appropriate endpoint IP (or domain) based on the configured routing method (e.g., Performance, Priority, Geographic, etc.). Importantly, Traffic Manager is agnostic to IP version: it can return **AAAA records for IPv6 endpoints** just as it returns A records for IPv4. This makes it suitable for routing IPv6 traffic globally.

**Architecture Overview:** In this setup, each region has its own dual-stack Application Gateway (with an IPv6 frontend). Traffic Manager is configured with an endpoint entry for each region’s gateway. When an IPv6-only client tries to reach the application’s URL, the DNS resolution will go through Traffic Manager, which decides which regional gateway’s IP to return. The client then connects directly to that Application Gateway’s IPv6 address. Traffic flows as:

- **DNS query**: Client asks for `yada.dedroog.net`. The domain is configured to use a Traffic Manager profile (e.g., `dedroog.trafficmanager.net` as an alias).
- **Traffic Manager decision**: Traffic Manager sees an incoming DNS request (which may come with the client’s IP context) and chooses the best endpoint (say, the Sweden Central) based on routing rules (e.g., geographic proximity or lowest latency).
- **DNS response**: Traffic Manager returns the IPv6 address (AAAA record) of the Sweden Central Application Gateway to the client. If the client were IPv4, it’d return the IPv4 address (A record) for that region’s gateway similarly.
- **Client connects**: The client’s browser connects to the West Europe App Gateway IPv6 address directly. The HTTP/S session is established via IPv6 to that regional gateway, which then handles the request (possibly forwarding to its local backend pool).
- If that region becomes unavailable, Traffic Manager’s health checks will detect it and subsequent DNS queries will get an answer pointing to the secondary region’s gateway. This **failover** can happen for both IPv4 and IPv6 seamlessly, since Traffic Manager monitors endpoint health over both IPs.

**Deployment Steps for Multi-Region with Traffic Manager:**

1. **Set up Dual-Stack Application Gateways in each region**: Similar to the single-region case, deploy an Azure Application Gateway v2 in each desired region (e.g., one in North America, one in Europe, one in Asia). Each should be configured with a public IPv4 and IPv6 address. Configure the web application in each region (these could be parallel deployments serving the same content).
2. **Configure a Traffic Manager Profile**: In Azure [Traffic Manager](https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview), create a profile and choose a [routing method](https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-routing-methods) (such as Performance for nearest region routing, or Priority for primary/backup failover). Add [endpoints](https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-endpoint-types) for each region. Since our endpoints are Azure services with IPs, we can either use *Azure endpoints* (if the Application Gateways have Azure-provided DNS names) or *External endpoints* using the IP addresses. The simplest way is to use the *Public IP resource* of each Application Gateway as an Azure endpoint – ensure each App Gateway’s public IP has a DNS label (so it has a FQDN) or use its Azure resource directly in TM. Traffic Manager will detect those and also be aware of their IPs. Alternatively, use the IPv6 address as an External endpoint directly. Note: when using IP addresses, Traffic Manager allows IPv6 addresses and will return AAAA records for them.
3. **Dual-stack DNS Setup**: Traffic Manager profiles have a FQDN (like `myapp.trafficmanager.net`). You can either use that as your service’s CNAME, or you can configure your custom domain to CNAME to the TM profile. For instance, if your site is `yada.dedroog.net`, you might set `yada.dedroog.net` CNAME to `dedroog.trafficmanager.net`. Traffic Manager will automatically provide both A and AAAA answers for that name, according to the endpoints. (If using azure-provided DNS of App Gateway, ensure each App Gateway’s DNS name has both A and AAAA in Azure DNS – Azure will do this since the gateway is dual-stack.)
4. **Health Probing**: Traffic Manager continuously checks the health of endpoints. When endpoints are Azure App Gateways, TM typically uses HTTP/HTTPS probes (you can specify a path) to each gateway’s address. Make sure each App Gateway has a listener on the probing endpoint (e.g., a health check page) and that health probes are enabled. TM will consider an endpoint degraded if probes fail over both IPv4 and IPv6. (In practice, since App Gateway doesn’t distinguish, if the app is down, both IPs yield failure.)
5. **Testing Failover and Distribution**: Test the setup by querying DNS from different geographical locations (to see if you get the nearest region’s IP). Also simulate a region down (stop the App Gateway or backend) and observe if Traffic Manager directs traffic to the other region. Because DNS TTLs are involved, failover isn’t instant but typically within a couple of minutes depending on TTL and probe interval.

**Considerations in this Architecture:**
- *Latency vs Failover:* Traffic Manager as a DNS load balancer directs users at connect time, but once a client has an answer (IP address), it keeps sending to that address until the DNS record TTL expires and it re-resolves. This is fine for most web apps. Ensure the TTL in TM profile is not too high (the default is often 30 seconds in Azure Traffic Manager, which is quite low for quick change detection).
- *IPv6 DNS and Connectivity:* Confirm that each region’s IPv6 address is correctly configured and reachable globally. Azure’s public IPv6 addresses are globally routable. Traffic Manager itself is a global service and fully supports IPv6 in its decision-making. (It even supports IPv6 in the EDNS client subnet for geolocation decisions, though that’s an advanced detail.)
- *Cost:* Using multiple Application Gateways and Traffic Manager incurs costs for each component (App Gateway is per hour + capacity unit, Traffic Manager per million DNS queries). This is a trade-off for high availability.
- *Alternative: Azure Front Door:* If your application is purely web (HTTP/S), you might consider Azure Front Door instead of the TM+AG combination. Front Door can automatically handle global routing and failover at layer 7 without DNS-based limitations, offering potentially faster failover. We discuss Front Door in the next section.

**In summary**, a multi-region IPv6 web delivery with Application Gateways uses **Traffic Manager for global DNS load balancing**. Traffic Manager will seamlessly return IPv6 addresses for IPv6 clients, ensuring that no matter where an IPv6-only client is, they get pointed to the nearest available regional deployment of your app. This design achieves **global resiliency** (withstand a regional outage) and **low latency** access, leveraging IPv6 connectivity on each regional endpoint.

**Example:** The global FQDN of our application is now `yada.dedroog.net`, i.e. clients will use this FQDN to access the application regardless of their geographical location.
Traffic Manager will return the FQDN of one of the regional deployements, `yada-r1.dedroog.net` or `yada-r2.dedroog.net` depending on the routing method configured, the health state of the regional endpoints and the client's location. Then the client resolves the regional FQDN through its local DNS server and connects to the regional instance of the application.

![image](images/appgw-dual-region.png)


### Azure Front Door


# Public Web Application Delivery over IPv6

Modern internet applications must accommodate **IPv6 connectivity** to reach all users, especially as IPv4 addresses become scarce and new networks (mobile carriers, IoT, etc.) shift to IPv6[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview). Ensuring clients with **only an IPv6 address** can access your website or web app is crucial for compatibility and future-proofing[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584)[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview). Azure provides multiple services and architectures to deliver web applications over IPv6. This report covers *IPv6 application delivery* in Azure and guides how to use **Azure Application Gateway** (single-region and multi-region deployments) and **Azure Front Door** to enable IPv6 access. Key concepts and services include: 

- **IPv6** – The latest Internet Protocol (128-bit addressing) offering an enormous address space, eliminating address exhaustion concerns and often simplifying networking by reducing the need for NAT (Network Address Translation). IPv6 adoption is rising, and IPv4-only services risk losing reach to IPv6-only clients[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview). Embracing IPv6 ensures *global accessibility* and future readiness of web applications.
- **Azure Application Gateway** – A regional Layer-7 load balancer and Web Application Firewall (WAF) service for managing HTTP/S traffic. It can be configured in **dual-stack mode** to serve both IPv4 and IPv6 clients on the frontend[7](https://learn.microsoft.com/en-us/azure/application-gateway/application-gateway-faq).
- **Azure Traffic Manager** – A DNS-based global traffic routing service. It distributes traffic across multiple endpoints (in different regions) based on DNS queries. Traffic Manager supports IPv6 by returning AAAA records for IPv6 endpoints, enabling global load balancing for IPv6 clients[6](https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-endpoint-types).
- **Azure Front Door** – A globally distributed anycast service (Layer-7) that acts as an entry point for web applications. It provides content delivery network (CDN) capabilities, smart routing, and **native end-to-end IPv6 support**[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview). Front Door presents a single global dual-stack endpoint for your application, ensuring IPv6-only clients can connect seamlessly[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview).
- **Other Azure Networking Services** – Azure also supports IPv6 on services like Azure Load Balancer (Layer-4 load balancing for VMs)[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview) and provides IPv6 connectivity features in virtual networks[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview). However, many platform-as-a-service offerings (e.g., App Services) do not natively support IPv6 yet[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/), so fronting them with services like Application Gateway or Front Door is a common solution[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/).

Below, we delve into each approach for IPv6 web application delivery, followed by best practices and considerations for deploying a highly available, secure, and manageable IPv6-enabled architecture.

---

## IPv6 Application Delivery



### Application Gateway – Single Region


### Application Gateway – Multi-Region



### Azure Front Door

**Azure Front Door** is a scalable, multi-region aware service ideal for IPv6 web application delivery. Unlike the Application Gateway which is regional, Front Door is a **global anycast service** that provides a single, unified frontend distributed across Microsoft’s edge network. It acts as an application delivery network with built-in CDN, SSL offload, WAF, and routing capabilities. Crucially, **Azure Front Door natively supports end-to-end IPv6 connectivity**[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview), which means it automatically caters to IPv6 clients without special configuration.

**Why use Front Door for IPv6?** For applications that have users worldwide, Front Door offers several advantages:
- **Single Global IPv6 Endpoint:** Front Door uses anycast IP addresses reachable from hundreds of edge locations. When you create a Front Door profile, it is accessible via a frontdoor.net domain that has both A and AAAA DNS records by default. IPv6 users hitting that domain will get an IPv6 address and connect to the nearest Front Door POP (Point of Presence) over IPv6[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview).
- **No Complex DNS Management:** Unlike Traffic Manager which requires configuration and still relies on DNS resolution, Front Door abstracts that away. Your custom domain CNAMEs to the Front Door domain and Microsoft ensures that front door’s DNS includes the AAAA records. Failover and routing are handled internally by Front Door’s network.
- **Layer-7 Intelligent Routing:** Front Door can make routing decisions based on URL paths or other attributes, and can distribute traffic to backend pools across regions. It detects backend health and can automatically remove an unhealthy region from rotation in seconds. This can yield faster failover than DNS-based methods.
- **Performance Benefits:** Front Door’s anycast network and split TCP (with edge termination) can accelerate web traffic. It effectively brings your application closer to users by using Microsoft’s global network for transport. IPv6 traffic benefits here too – *Front Door accelerates IPv6 in the same way as IPv4*.
- **Security and WAF:** Front Door integrates with Azure WAF (Web Application Firewall) at the edge and provides protection against network-layer DDoS by virtue of the massive capacity of the edge network[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview). It also supports features like SSL offloading, so you can manage certificates centrally.

**IPv6 Connectivity with Front Door:** Azure Front Door is inherently dual-stack. According to Microsoft, Front Door **“natively [supports] end-to-end IPv6 connectivity”**[5](https://learn.microsoft.com/en-us/azure/frontdoor/front-door-overview). This means a client can connect via IPv6 to Front Door, and Front Door can even connect via IPv6 to the backend if the backend has an IPv6 address (though often backends are IPv4 – Front Door can talk to them over IPv4 just fine). In practice, when you create a Front Door, you get a default frontend host like `yourapp.azurefd.net`. If you perform a DNS lookup, you will see it resolves to an IPv4 address and an IPv6 address. Clients will prefer IPv6 if they have it. Additionally, Front Door passes the client IP via headers (X-Forwarded-For); if the original client was IPv6, that header will contain an IPv6 address. Some users note that Front Door in Standard/Premium can show IPv6 client IP which may differ if they're expecting an IPv4 (it's on by design, since the client is IPv6).

**Configuration Steps for Azure Front Door:**

1. **Create a Front Door profile:** In the Azure Portal, create a new **Front Door (Standard/Premium)** (the newer tier) or Front Door (Classic). The Standard/Premium offers modern capabilities and should be used for new deployments. Choose a **policy (if using WAF)** if needed. Creation will require you to specify **Front Door endpoint** (a name for the *.azurefd.net domain).
2. **Add Backend Pools:** Configure one or more backend pools in Front Door. Backends can be anything: Azure Web Apps, Application Gateways, VMs with Public IPs, etc. Even if those backends are IPv4-only (e.g., an Azure Web App with only IPv4), you can **still provide IPv6 access via Front Door** because the front end is dual-stack[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/). Front Door will forward to the backend's IPv4 address. If your backend *does* have an IPv6 address (like a dual-stack App Gateway or VM with IPv6), you could specify it, but that's optional. Assign a name and configure health probe and load balancing settings for the pool.
3. **Configure Routes:** Set up a routing rule mapping the Front Door frontend to the backend pool. For example, route `/*` (all paths) on your Front Door domain to Backend Pool A. Enable protocols (Front Door supports HTTP/2 and web sockets with IPv6 too). If you have multiple regions, you might have multiple backend endpoints in the pool; Front Door will balance between them (you can do priority-based or weighted to prefer one region and fail to another).
4. **Front Door Frontend Host and Custom Domain:** Once deployed, test using the default front door hostname (e.g., `yourapp.azurefd.net`). It should be reachable via IPv6. Then map your custom domain: create a CNAME from `www.contoso.com` to `yourapp.azurefd.net`. Azure Front Door will automatically serve traffic for that custom domain once you validate it. The custom domain will also have AAAA because it's an alias to the Front Door’s anycast addresses.
5. **WAF and Security (optional):** If you enabled WAF, configure WAF policies to suit (Front Door WAF can block malicious traffic, including IPv6 attacks, at the edge). Azure Front Door’s distributed nature also provides built-in resilience to DDoS – Azure’s global network can absorb very large attacks, and baseline DDoS protection covers both IPv4 and IPv6 traffic.

**Outcome:** After this setup, your application is accessible via a globally distributed IPv6 endpoint. An IPv6-only client from, say, Germany will resolve `www.contoso.com` to an IPv6 that routes to the nearest Front Door POP in Europe. The request might be terminated there and forwarded (over Azure backbone) to your backend in perhaps West Europe region. If that backend is down, Front Door could quickly switch to a backup backend in East US, for example, and the user would hardly notice beyond maybe a slight latency increase. All of this occurs with the client **staying on IPv6** – there’s no need for the client to ever use IPv4. Azure Front Door effectively bridges IPv6 clients to IPv4 applications when necessary[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/), while giving the appearance of a single IPv6-enabled site.

**Additional Notes:** 
- Front Door’s anycast means the IPv6 address your clients connect to is not a region-specific address (unlike the App Gateway scenario). It’s an address that is advertised from many locations. This simplifies client configuration (one AAAA record). However, you don’t control what that address is – it’s managed by Azure and could change if you recreate the front door. Typically you just use DNS names.
- Logging and diagnostics: Front Door logs will include client IPs which will be IPv6 for IPv6 clients. Ensure your analytics pipeline can handle that. Front Door metrics and Azure Monitor work similarly for both IP versions.
- *End-to-end IPv6:* If your backend also supports IPv6 (for example, an Application Gateway with IPv6 in a region feeding into Front Door), Front Door can pass traffic over IPv6. But commonly, front door will connect to backends via IPv4 (e.g., an Azure Web App with only IPv4 address). This is fine, since the client-to-FrontDoor leg is IPv6, fulfilling the requirement that IPv6-only clients can access the app.

---

## Best Practices and Additional Considerations

Enabling IPv6 for web applications involves more than just turning it on. Here are **best practices, tips, and considerations** to ensure a successful IPv6 deployment on Azure:

**1. Addressing and DNS Configuration:**
- **Use Dual-Stack Strategically:** Deploy in dual-stack mode so you maintain IPv4 compatibility. Ensure your Azure VNets have adequate IPv6 address space (at least a /64 per subnet)[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584). Plan your IPv6 addressing scheme (Azure suggests a /56 per VNet for flexibility)[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584).
- **Public DNS Records:** Always create both A (IPv4) and AAAA (IPv6) records for your application’s FQDN if you want both client types. IPv6-only clients rely on the AAAA record[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584). Keep DNS TTLs moderate (e.g., 5 minutes) to allow quick updates if you need to change an IP.
- **Reverse DNS and Email**: If your application sends email or requires reverse DNS, you might need an IPv6 reverse DNS entry for email server legitimacy. Azure allows setting PTR records for public IPs including IPv6.

**2. High Availability & Redundancy:**
- **Zone-Redundancy:** For single region setups, use zone-redundant Application Gateway if available, so that the gateway instances span Availability Zones and continue operating even if one AZ goes down.
- **Multi-Region Active/Passive:** If using Traffic Manager with App Gateways, consider a Priority routing method with one region as primary and another as backup if you prefer a failover design. Test failover periodically.
- **Front Door Health Probes:** With Front Door, configure health probes with appropriate intervals and sensitivity so it can detect backend failures quickly (e.g., probe every 30 seconds, consider backend down after 3 failures).
- **Gradual Rollout:** Introduce IPv6 gradually if possible. You can initially publish an IPv6 address for a secondary/test domain to gauge traffic and then roll out to main domain. Or use Traffic Manager’s weighted routing to send a percentage of traffic to an IPv6-enabled path.

**3. Security Considerations:**
- **Azure DDoS Protection:** Azure’s infrastructure provides basic DDoS protection for all IPv6 addresses. For critical services, **enable Azure DDoS Network Protection (Standard)** on the virtual network. It now supports IPv6 and will mitigate large-scale attacks specifically targeted at your IPv6 endpoints.
- **Network Security Groups (NSGs):** If you have VMs or other resources with IPv6, update NSG rules to include IPv6 sources if needed. By default, NSGs support IPv6 rules and you might want to mirror your IPv4 rules.
- **WAF Rules:** Use Application Gateway WAF or Front Door WAF to inspect traffic. Note that while they protect equally against attacks over IPv6, certain rule sets or custom rules might have limitations (e.g., at time of writing, App GW WAF custom rule cannot match on IPv6 addresses in the client IP field[4](https://learn.microsoft.com/en-us/azure/application-gateway/ipv6-application-gateway-portal)). Keep WAF signatures up to date to cover new threats.
- **No Security by Obscurity:** Don’t assume IPv6 is “safe” because addresses are numerous. Apply the same level of security (patching, hardening, monitoring) as you would for IPv4. Attackers can still find vulnerable services via DNS or by scanning portions of the IPv6 space.

**4. Monitoring & Troubleshooting:**
- **Logging:** Ensure you collect logs from your front door services. Application Gateway access logs will show client IP addresses – verify that your logging pipeline can parse IPv6 format. Front Door logs in Azure Monitor (or Log Analytics) similarly record client IPv6. Check that any IP whitelisting or analysis tools are updated for IPv6.
- **End-to-End Testing:** Use tools like `ping6` and `curl` with IPv6, or online testers (e.g., Google IPv6 test, Ping.pe, etc.) to test reachability. Azure Network Watcher’s “Connection Troubleshoot” can test connectivity from a source to a destination IPv6 in Azure.
- **Monitoring Metrics:** Track metrics like Application Gateway’s throughput and connection count over IPv6 vs IPv4 (if available). Even if metrics aren’t split by IP version, a sudden drop in overall traffic might indicate an IPv6-specific issue if IPv4 continues (or vice versa). Use Azure Monitor alerts on endpoint health (Traffic Manager can emit alerts if an endpoint goes down).
- **Troubleshooting Connectivity:** If IPv6 isn’t working while IPv4 is, common misconfigurations include missing DNS AAAA records, not having a public IPv6 assigned, or firewall rules blocking IPv6. Also ensure your client is truly using IPv6 (use diagnostic headers or logs to confirm).

**5. Common Challenges and Solutions:**
- **Legacy Systems:** Some older client systems or corporate networks may not support IPv6. Ensure you maintain IPv4 for compatibility in dual-stack setups. Conversely, some new networks are IPv6-only (e.g., certain mobile carriers), necessitating your IPv6 deployment – which is the whole point of these efforts[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview).
- **Azure Services Gaps:** Not all Azure services have caught up on IPv6. For example, Azure App Service (Web Apps) for a long time had no direct IPv6 support[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/). The solution is to put an IPv6-capable service in front (like Front Door or App Gateway)[3](https://www.patrickob.com/2018/11/09/supporting-ipv6-in-app-service-azure-front-door/). Similarly, Azure Storage and others might need a proxy if IPv6 access is required. Keep an eye on Azure updates as more services become dual-stack over time[2](https://learn.microsoft.com/en-us/azure/virtual-network/ip-services/ipv6-overview).
- **Operational Knowledge:** Ensure your IT staff is familiar with IPv6 addresses and notation, as well as how to diagnose IPv6 issues. Update documentation (runbooks, network diagrams) to include IPv6 information. Something as simple as recognizing an IPv6 literal in logs is important for incident response.
- **Performance Metrics:** In most cases, IPv6 performance is on par with IPv4. But if you encounter slowness, investigate if there are any IPv6 routing issues or if the traffic is taking a less optimal path. Azure’s anycast (Front Door) should optimize this, but regional solutions might depend on internet routing to Azure’s IPv6 ranges.
- **Compliance Requirements:** If your project is driven by compliance (government mandates for IPv6), ensure you meet any specific criteria (for example, U.S. government sites might need a certain percentage of content available over IPv6, etc.). Azure’s solutions described help meet those by providing functional equivalence between IPv4 and IPv6 offerings of your site.

---

**Conclusion:** Adopting IPv6 for public web application delivery on Azure is a matter of leveraging Azure’s dual-stack networking features and services like Application Gateway, Traffic Manager, and Front Door. In single-region scenarios, enabling an IPv6 frontend on Application Gateway instantly opens your app to IPv6 users[1](https://techcommunity.microsoft.com/blog/fasttrackforazureblog/adopting-public-ipv6-for-three-tier-web-applications/4211584)
